<!DOCTYPE html>
<html lang="tr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kalbime Tƒ±klar mƒ±sƒ±n? üíå</title>
<style>
body {
  margin: 0;
  padding: 0;
  overflow: hidden;
  background: url("./123.jpg") no-repeat center center fixed;
  background-size: cover;
  font-family: 'Comic Sans MS', cursive, sans-serif;
  color: #d63384;
  height: 100vh;
  display: flex;
  justify-content: center;
  align-items: center;
  flex-direction: column;
  position: relative;
}

/* Hafif pembe saydam t√ºl efekti */
body::before {
  content: "";
  position: absolute;
  inset: 0;
  background: rgba(255, 200, 220, 0.3);
  z-index: 0;
}

#mainTitle {
  font-size: 2.2em;
  text-shadow: 1px 1px 3px #fff;
  margin: 0;
  position: absolute;
  top: calc(50vh - 180px);
  left: 50%;
  transform: translateX(-50%);
  z-index: 5;
}

.envelope-container {
  position: relative;
  width: 350px;
  height: 220px;
  cursor: pointer;
  perspective: 1000px;
  z-index: 2;
}

.envelope {
  position: relative;
  width: 100%;
  height: 100%;
  background: #ffc0cb;
  border-radius: 15px;
  transition: transform 0.5s ease;
  box-shadow: 0 6px 20px rgba(0,0,0,0.25);
  overflow: visible;
}

.flap {
  position: absolute;
  top: 0;
  left: 0;
  width: 0;
  height: 0;
  border-left: 175px solid transparent;
  border-right: 175px solid transparent;
  border-top: 110px solid #ff9fb5;
  transition: transform 0.8s ease;
  transform-origin: top;
  z-index: 2;
}

.heart {
  position: absolute;
  top: 90px;
  left: 145px;
  font-size: 36px;
  color: #ff1a75;
  z-index: 3;
  transition: transform 0.3s ease;
}

.message {
  position: absolute;
  top: 140px;
  left: 50%;
  transform: translateX(-50%);
  width: 300px;
  height: 220px;
  background: #fff;
  padding: 25px;
  border-radius: 15px;
  border: 2px dashed #ff80a0;
  box-shadow: 0 0 20px rgba(0,0,0,0.2);
  opacity: 0;
  transition: all 1s ease;
  z-index: 1;
  font-size: 1.05em;
  overflow-y: auto;
  scrollbar-width: thin;
  scrollbar-color: #ffb6c1 #ffe6f0;
}

.open .flap { transform: rotateX(180deg); }
.open .heart { transform: scale(1.5) rotate(-10deg); }
.open .message { opacity: 1; top: 140px; } 

.heart-fly, .spark {
  position: fixed;
  pointer-events: none;
  animation: fly linear forwards;
  z-index: 10;
}

.heart-fly { 
  filter: drop-shadow(0 0 4px #fff);
  text-shadow: 0 0 4px #fff;
}

.poem {
  position: absolute;
  background: rgba(255,255,255,0.85);
  border-radius: 15px;
  padding: 15px 20px;
  width: 230px;
  font-size: 0.95em;
  color: #d63384;
  box-shadow: 0 4px 15px rgba(0,0,0,0.2);
  opacity: 0;
  animation: fadeIn 2s ease forwards;
  white-space: pre-line;
  text-align: center;
  font-weight: bold;
}

@keyframes fadeIn {
  0% { opacity: 0; transform: translateY(-20px) scale(0.9); }
  100% { opacity: 1; transform: translateY(0) scale(1); }
}

@keyframes fly {
  0% { transform: translate(0,0) rotate(0deg) scale(1); opacity: 1; }
  100% { transform: translate(var(--x,0), var(--y,-700px)) rotate(var(--r,360deg)) scale(var(--s,1.2)); opacity: 0; }
}
</style>
</head>
<body>

<h1 id="mainTitle">Kalbime tƒ±klar mƒ±sƒ±n?</h1>

<div class="envelope-container" id="envelopeContainer">
  <div class="envelope">
    <div class="flap"></div>
    <div class="heart">‚ù§Ô∏è</div>
    <div class="message" id="messageBox">
      <h3>Canƒ±m Nida...</h3>
      <p>
        Kalbimin en g√ºzel k√∂≈üesinde hep sen varsƒ±n.  
        Bazen kelimeler yetersiz kalƒ±yor ama hislerim hep aynƒ±:  
        Seni incittiysem, inan bana, bu kalbimin en derin yerinden √∂z√ºr dilerim.  
        Sensiz ge√ßen her saniye, √∂mr√ºmden bir par√ßa eksiliyor.  
        G√ºl√º≈ü√ºn, sesin, adƒ±n ‚Äî hepsi hayatƒ±mƒ±n melodisi.  
        Seni seviyorum, Nida. Sonsuza dek üíñ
      </p>
    </div>
  </div>
</div>

<audio id="bgMusic" loop>
  <source src="muzik.mp3" type="audio/mpeg">
</audio>

<audio id="pianoSound" src="https://cdn.pixabay.com/download/audio/2021/09/30/audio_9d35a9f25a.mp3?filename=piano-note-5-103005.mp3"></audio>

<script>
const container = document.getElementById("envelopeContainer");
const pianoSound = document.getElementById("pianoSound");
const bgMusic = document.getElementById("bgMusic");
let heartsInterval;
let poemsCreated = false;

document.body.addEventListener("click", () => {
  bgMusic.volume = 0;
  bgMusic.play().then(() => {
    let v = 0;
    const fade = setInterval(() => {
      v += 0.02;
      if (v >= 1) { clearInterval(fade); v = 1; }
      bgMusic.volume = v;
    }, 200);
  }).catch(()=>{});
}, { once: true });

container.addEventListener("click", async () => {
  const envelope = container.querySelector(".envelope");
  envelope.classList.toggle("open");

  try { 
    pianoSound.currentTime = 0;
    await pianoSound.play();
  } catch(e) { console.log("Ses √ßalƒ±namadƒ±:", e); }

  if (envelope.classList.contains("open")) {
    if (!poemsCreated) {
      createPoems();
      poemsCreated = true;
    }
    heartsInterval = setInterval(() => {
      const count = Math.floor(Math.random()*4) + 3;
      for (let i=0; i<count; i++) createHeart();
    }, 150);
  } else {
    clearInterval(heartsInterval);
  }
});

function createPoems() {
  const poems = [
    "üåπ **N**azlƒ± bir g√ºl gibi a√ßtƒ±n kalbimde,\n**ƒ∞**√ßimde bir yƒ±ldƒ±z gibi parladƒ±n sen.\n**D**okununca ruhuma, hayat buldu her ≈üey,\n**A**≈ükƒ±nla tamamlandƒ± benliƒüimdeki eksik renkler.",
    "üíû **N**e zaman baksam g√∂ky√ºz√ºne,\n**ƒ∞**smini yazar buluyorum bulutlara.\n**D**algalar bile fƒ±sƒ±ldƒ±yor adƒ±nƒ±,\n**A**≈ükla doluyor kalbim sana dair her hatƒ±rada.",
    "üå∏ **N**efesim sensin, varlƒ±ƒüƒ±n huzurum,\n**ƒ∞**√ßimde yankƒ±lanƒ±r sevdanƒ±n sesi.\n**D**uygularƒ±mƒ±n dili oldun artƒ±k,\n**A**nlam kazandƒ± her ≈üey seninle, sevgilim.",
    "üíñ **N**asƒ±l ki g√ºn doƒüarsa umutla,\n**ƒ∞**√ßimde her sabah seninle ba≈ülar.\n**D**okununca kalbime isminin harfi,\n**A**≈ükla dolup ta≈üar b√ºt√ºn d√ºnyam.",
    "üå∑ **N**arin bir tebess√ºm gibi dokundun ruhuma,\n**ƒ∞**√ßimde kelebekler u√ßu≈ütu seninle.\n**D**ertler bile g√ºzelle≈üti g√ºl√º≈ü√ºnle,\n**A**≈ükla yeniden doƒüdum, seninle Nida.",
    "üíå **N**asƒ±l anlatsam bilmem, bir mucizesin,\n**ƒ∞**√ßimde √ßi√ßek a√ßan bir baharsƒ±n.\n**D**aima kalbimin en g√ºzel yerindesin,\n**A**≈ükla anƒ±yorum seni her nefeste.",
    "üå∫ **N**e kadar zaman ge√ßerse ge√ßsin,\n**ƒ∞**√ßimde hep sen varsƒ±n.\n**D**oƒüduƒüumdan beri aradƒ±ƒüƒ±m huzur,\n**A**dƒ±nda saklƒ±, Nida‚Äôm."
  ];

  // Zarfƒ±n etrafƒ±nƒ± saran konumlar
  const positions = [
    { top: "5%", left: "50%", transform: "translateX(-50%)" },    // √ºstte
    { top: "25%", left: "15%" },                                   // sol √ºst
    { top: "45%", left: "5%" },                                    // sol
    { top: "65%", left: "15%" },                                   // sol alt
    { top: "80%", left: "50%", transform: "translateX(-50%)" },    // altta
    { top: "25%", right: "15%" },                                  // saƒü √ºst
    { top: "55%", right: "10%" }                                   // saƒü
  ];

  poems.forEach((text, i) => {
    const div = document.createElement("div");
    div.classList.add("poem");
    div.style.top = positions[i].top;
    if (positions[i].left) div.style.left = positions[i].left;
    if (positions[i].right) div.style.right = positions[i].right;
    if (positions[i].transform) div.style.transform = positions[i].transform;
    div.innerHTML = text;
    div.style.animationDelay = `${i * 0.7}s`;
    document.body.appendChild(div);
  });
}

function createHeart() {
  const heart = document.createElement("div");
  heart.classList.add("heart-fly");
  heart.textContent = ["üíñ","‚ù§Ô∏è","üíï","üíû"][Math.floor(Math.random()*4)];
  heart.style.left = Math.random() * window.innerWidth + "px";
  heart.style.bottom = "0px"; 
  const scale = (0.8 + Math.random()*0.7).toFixed(2);
  heart.style.setProperty('--s', scale);
  const xMovement = (Math.random()*400 - 200).toFixed(0) + "px";
  const rotation = (Math.random()*360).toFixed(0) + "deg";
  const yMovement = -(500 + Math.random()*300) + "px"; 
  heart.style.setProperty('--x', xMovement);
  heart.style.setProperty('--r', rotation);
  heart.style.setProperty('--y', yMovement);
  const duration = (3 + Math.random()*3).toFixed(1) + "s"; 
  heart.style.animationDuration = duration;
  document.body.appendChild(heart);
  setTimeout(() => heart.remove(), parseFloat(duration)*1000);
}
</script>

</body>
</html>
